# People Counter MVP - Environment Variables Configuration
# Copy this file to .env and modify as needed

# Camera Configuration
CAMERA__URL=0
CAMERA__RECONNECT_DELAY=5.0
CAMERA__MAX_RECONNECT_ATTEMPTS=10
# FPS cap: 0 = no cap (process all frames for continuous scanning), >0 = max FPS
CAMERA__FPS_CAP=0
CAMERA__CAMERA_ID=camera_01
# For high-resolution cameras: resize frame before detection for faster processing
# Lower values = faster processing. Example: 480 for 640x480 (maximum speed), 640 for 1280x720, 1280 for 1920x1080
# Set to 480 or lower for maximum FPS (recommended for fast movement detection)
CAMERA__MAX_RESOLUTION=480

# Detection Configuration
DETECTION__MODEL_NAME=yolov8n.pt
DETECTION__CONF_THRESHOLD=0.5
DETECTION__IOU_THRESHOLD=0.5
DETECTION__DEVICE=cpu
# Input image size for YOLO: Lower = faster. 256 = maximum speed, 320 = fast, 640 = balanced, 1280 = more accurate
# For maximum FPS and fast movement detection, use 256
DETECTION__IMGSZ=256

# Tracking Configuration
TRACKING__TRACKER_TYPE=bytetrack
TRACKING__TRACK_THRESH=0.5
TRACKING__TRACK_BUFFER=30
TRACKING__MATCH_THRESH=0.8

# Line Configuration (Legacy)
# Format: JSON array "[x,y]"
LINE__LINE_START=[0,240]
LINE__LINE_END=[640,240]
LINE__MIN_TRACK_LENGTH=10
LINE__COOLDOWN_FRAMES=60

# Gate Configuration (New - Preferred)
# Modes: HORIZONTAL_BAND, VERTICAL_BAND, LINE_BAND, SEGMENT (segment-crossing - recommended for fast counting)
GATE__GATE_MODE=SEGMENT
# For HORIZONTAL_BAND:
# GATE__GATE_Y=240.0
# GATE__GATE_HEIGHT=40.0
# GATE__GATE_X_MIN=
# GATE__GATE_X_MAX=
# For SEGMENT mode (segment-crossing - recommended):
GATE__GATE_P1_X=100.0
GATE__GATE_P1_Y=240.0
GATE__GATE_P2_X=540.0
GATE__GATE_P2_Y=240.0
# Direction mapping for SEGMENT mode:
GATE__DIRECTION_MAPPING_POS_TO_NEG=IN
GATE__DIRECTION_MAPPING_NEG_TO_POS=OUT
# Optional: for horizontal gate, use UP/DOWN instead:
# GATE__DIRECTION_MAPPING_UP=IN
# GATE__DIRECTION_MAPPING_DOWN=OUT
# Optional: X range to limit gate region:
# GATE__X_RANGE_MIN=50.0
# GATE__X_RANGE_MAX=590.0

# For VERTICAL_BAND (Gate dọc - legacy):
# GATE__GATE_X=320.0
# GATE__GATE_WIDTH=20.0
# GATE__GATE_Y_MIN=
# GATE__GATE_Y_MAX=
# Buffer zones (vùng đệm 2 bên gate) - giảm 1 nửa để tăng tốc
# GATE__BUFFER_ZONE_WIDTH=100.0
# GATE__USE_BUFFER_ZONES=true
# For LINE_BAND (if GATE_MODE=LINE_BAND):
# GATE__GATE_P1=[0,240]
# GATE__GATE_P2=[640,240]
# GATE__GATE_THICKNESS=40.0
# Direction mapping
GATE__DIRECTION_MAPPING_TOP_BOTTOM=OUT
GATE__DIRECTION_MAPPING_BOTTOM_TOP=IN
GATE__DIRECTION_MAPPING_LEFT_RIGHT=IN
GATE__DIRECTION_MAPPING_RIGHT_LEFT=OUT
# Anti-jitter params - optimized for segment-crossing
GATE__COOLDOWN_SEC=0.8
GATE__MIN_FRAMES_IN_GATE=1
GATE__MIN_TRAVEL_PX=12.0

# Window Configuration
WINDOW__TIMEZONE=Asia/Bangkok
WINDOW__WINDOW_A_START=12:00
WINDOW__WINDOW_A_END=12:59
WINDOW__WINDOW_B_START=13:00
WINDOW__WINDOW_B_END=13:59

# Notification Configuration
NOTIFICATION__ENABLED=false
NOTIFICATION__CHANNEL=telegram
NOTIFICATION__TELEGRAM_BOT_TOKEN=
NOTIFICATION__TELEGRAM_CHAT_ID=
NOTIFICATION__EMAIL_SMTP_HOST=smtp.gmail.com
NOTIFICATION__EMAIL_SMTP_PORT=587
NOTIFICATION__EMAIL_FROM=
NOTIFICATION__EMAIL_TO=
NOTIFICATION__EMAIL_PASSWORD=
NOTIFICATION__WEBHOOK_URL=

# Logging Configuration
LOGGING__LEVEL=INFO
LOGGING__FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# Database
DB_PATH=data/people_counter.db

# PostgreSQL Configuration (optional - for production event storage)
# Set these environment variables to enable PostgreSQL storage
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DATABASE=people_counter
POSTGRES_USER=postgres
POSTGRES_PASSWORD=123456

# Snapshots
SAVE_SNAPSHOTS=true
SNAPSHOT_DIR=snapshots

# Production Scheduler Configuration
PRODUCTION__RESET_TIME=00:00
PRODUCTION__MORNING_START=16:27
PRODUCTION__MORNING_END=16:33
PRODUCTION__ALERT_INTERVAL_MIN=1

